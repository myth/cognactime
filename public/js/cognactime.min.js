(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var DEBUG=true;var util=require("./util");var gen=require("./generator");var client=function(){var ACTIVE_FILTER;var host=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");var socket;var options,quickFilters,optionsToggle,searchField,runTime,scienceButton,natureButton,historyButton,titleRuntime,userCount,results,loading;var cacheSelectors=function(){options=$("#options");optionsToggle=$("#options-toggle");quickFilters=$(".quickfilter");runTime=$("#filter-runtime");searchField=$("#filter-search");scienceButton=$("#filter-science");natureButton=$("#filter-nature");historyButton=$("#filter-history");titleRuntime=$("#title-runtime");userCount=$("#stats-users");results=$("#results");loading=$("#loading")};var connectToServer=function(){socket=io.connect(host);socket.on("connect",function(){console.log("Connected to server");loading.fadeOut(200,function(){results.hide().html('<h2 class="center">Soon â„¢</h2>').fadeIn(200)})});require("./events")(client)};var bindActions=function(){optionsToggle.on("click",function(e){e.preventDefault();options.slideToggle(200);optionsToggle.toggleClass("active")});runTime.on("input",function(e){e.preventDefault();titleRuntime.text("RUNTIME > "+$(this).val()+"m")});runTime.on("change",function(e){e.preventDefault();client.fetch()});quickFilters.on("click",function(e){e.preventDefault();ACTIVE_FILTER=$(this).attr("id").replace("filter-","");client.fetch()});searchField.on("keyup",function(e){if(e.keyCode===13){ACTIVE_FILTER=searchField.val();client.fetch()}})};var getOptions=function(filter){return{runtime:runTime.val(),torrents:false,filter:filter===null||filter===undefined?null:filter}};return{init:function(){console.log("Initializing CognacTime");var script=document.createElement("script");script.src="/socket.io/socket.io.js";document.body.appendChild(script);script.onload=connectToServer;cacheSelectors();bindActions()},fetch:function(){results.html("");gen.createRow();socket.emit("fetch",getOptions(ACTIVE_FILTER))},registerEventHandler:function(e,callback){socket.on(e,callback)},updateUserCount:function(count){userCount.text(count)},DEBUG:DEBUG}}();client.init()},{"./events":2,"./generator":3,"./util":4}],2:[function(require,module,exports){var util=require("./util");var gen=require("./generator");function registerEventHandlers(client){if(client.DEBUG)console.log("Registering event handlers");function onMessage(data){console.log("Received message: "+util.repr(data))}client.registerEventHandler("message",onMessage);function onStats(data){if(client.DEBUG)console.log("Received stats update: "+util.repr(data));client.updateUserCount(data.users)}client.registerEventHandler("stats",onStats);function onVideo(data){if(client.DEBUG)console.log("Received video object: "+util.repr(data));gen.createVideoCard(data)}client.registerEventHandler("video",onVideo)}module.exports=registerEventHandlers},{"./generator":3,"./util":4}],3:[function(require,module,exports){var generator=function(){var results=$("#results");return{createVideoCard:function(data){var html='<div class="col s12 m4 l3">'+'<div class="videocard grey darken-3 grey-text text-lighten-2">'+'<div class="videocard-image">'+'<img src="'+data.image+'">'+'<span class="card-title truncate">'+data.title+"</span>"+'</div><div class="videocard-content">'+"<h5>"+data.runtime+" minutes</h5>"+"<p>"+data.description+"</p>"+'</div><div class="videocard-action center">'+'<a href="#">Play!</a></div></div></div>';html=$(html).hide();results.append(html);html.fadeIn(150)},createRow:function(){return $('<div class="row"></div>')}}}();module.exports=generator},{}],4:[function(require,module,exports){var ObjectToString=function(obj){return JSON.stringify(obj,null,4)};module.exports.repr=ObjectToString},{}]},{},[1]);